(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{167:function(e,t,n){(e.exports=n(5)(!1)).push([e.i,"/*************************************************************************\n * ADOBE CONFIDENTIAL\n * ___________________\n *\n * Copyright 2022 Adobe\n * All Rights Reserved.\n *\n * NOTICE: All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n **************************************************************************/\n\n.persisted-queries-list > div > div:first-child {\n  display: none;\n}\n",""])},168:function(e,t,n){(e.exports=n(5)(!1)).push([e.i,"/*************************************************************************\n * ADOBE CONFIDENTIAL\n * ___________________\n *\n * Copyright 2022 Adobe\n * All Rights Reserved.\n *\n * NOTICE: All information contained herein is, and remains\n * the property of Adobe and its suppliers, if any. The intellectual\n * and technical concepts contained herein are proprietary to Adobe\n * and its suppliers and are protected by all applicable intellectual\n * property laws, including trade secret and copyright laws.\n * Dissemination of this information or reproduction of this material\n * is strictly forbidden unless prior written permission is obtained\n * from Adobe.\n **************************************************************************/\n\n.aem-graphiql__container\n  .graphiql-root\n  .graphiql__app\n  .persisted-queries-panel {\n  width: 200px;\n  border-right: 2px solid #e1e1e1;\n}\n\n.aem-graphiql__container\n  .graphiql-root\n  .graphiql__app\n  .persisted-queries-panel\n  .persisted-queries-list {\n  display: flex;\n  box-sizing: border-box;\n  height: 100%;\n  width: 100%;\n  position: relative;\n  min-height: 0;\n  min-width: 0;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n}\n\n.aem-graphiql__container\n  .graphiql-root\n  .graphiql__app\n  .persisted-queries-panel\n  .persisted-queries-header {\n  border-bottom: 1px solid #e1e1e1;\n  float: left;\n  width: 90%;\n  height: 34px;\n  padding: 7px 12px 6px;\n  cursor: default;\n}\n.persisted-queries-header > div {\n  float: left;\n}\n.persisted-queries-header > div > h4 {\n  margin-top: 5px;\n}\n.persisted-queries-header > button {\n  float: right;\n}\n#no-saved-queries {\n  padding: 20px;\n}\n",""])},277:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.GraphiQLApp=void 0;var a=r(n(14)),i=r(n(15)),u=r(n(25)),l=r(n(26)),o=r(n(22)),s=r(n(1)),c=r(n(30)),d=n(282),f=n(283),p=n(668);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,o.default)(e);if(t){var a=(0,o.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,l.default)(this,n)}}var y=function(e){(0,u.default)(n,e);var t=h(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return(0,i.default)(n,[{key:"init",value:function(){c.default.render(s.default.createElement(f.AppComponent,this.config),this.el)}}]),n}(d.ComponentBase);t.GraphiQLApp=y,document.addEventListener("DOMContentLoaded",(function(){var e=document.querySelector(".graphiql-root");e&&(0,p.create)(y,e)}))},282:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.ComponentBase=void 0;var a=r(n(14)),i=r(n(15)),u=function(){function e(t,n){(0,a.default)(this,e),this.el=t,this.config=n||{},this.init()}return(0,i.default)(e,[{key:"init",value:function(){throw new Error("Missing 'init()' function for class of type BaseComponent")}}]),e}();t.ComponentBase=u},283:function(e,t,n){"use strict";var r=n(0),a=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.AppComponent=void 0;var i=r(n(3)),u=r(n(14)),l=r(n(15)),o=r(n(39)),s=r(n(25)),c=r(n(26)),d=r(n(22)),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=b(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=i?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}r.default=e,n&&n.set(e,r);return r}(n(1)),p=r(n(23)),h=n(286),y=n(642),m=r(n(651)),v=n(20),g=n(35),E=n(41);function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(b=function(e){return e?n:t})(e)}function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,d.default)(e);if(t){var a=(0,d.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,c.default)(this,n)}}var O=function(e){(0,s.default)(n,e);var t=P(n);function n(e){var r;return(0,u.default)(this,n),(r=t.call(this,e)).state={query:E.DEFAULT_QUERY,queryName:null,path:null,url:r.props.config.url,reloadFlag:!1},r.handleQuerySelection=r.handleQuerySelection.bind((0,o.default)(r)),r.handleSave=r.handleSave.bind((0,o.default)(r)),r.handleUrlChange=r.handleUrlChange.bind((0,o.default)(r)),r.handleDelete=r.handleDelete.bind((0,o.default)(r)),r.handleReset=r.handleReset.bind((0,o.default)(r)),r.handleReload=r.handleReload.bind((0,o.default)(r)),r}return(0,l.default)(n,[{key:"handleQuerySelection",value:function(e){this.setState(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e))}},{key:"handleSave",value:function(e){this.setState((function(t){return{queryName:e}})),this.handleReload()}},{key:"handleDelete",value:function(){this.handleReload(),this.handleReset()}},{key:"handleReset",value:function(){this.setState((function(e){return{queryName:null,query:E.DEFAULT_QUERY,path:null}}))}},{key:"handleReload",value:function(){this.setState((function(e){return{reloadFlag:!e.reloadFlag}}))}},{key:"handleUrlChange",value:function(e){this.setState({url:e.detail}),this.handleReset()}},{key:"componentDidMount",value:function(){window.addEventListener("urlchange",this.handleUrlChange)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("urlchange",this.handleUrlChange)}},{key:"render",value:function(){var e=this.props.config.isPersistedQueriesUIEnabled;return f.default.createElement(m.default,{toastPlacement:"bottom center"},f.default.createElement(v.Provider,{theme:g.lightTheme,colorScheme:"light"},f.default.createElement("div",{className:"graphiql__app"},e&&f.default.createElement(y.PersistedQueriesPanel,{url:this.state.url,queryName:this.state.queryName,reloadFlag:this.state.reloadFlag,onQuerySelection:this.handleQuerySelection,onDelete:this.handleDelete,onCreate:this.handleReset}),f.default.createElement(h.GraphiQLComponent,{url:this.state.url,path:this.state.path,onSave:this.handleSave,onPublish:this.handleReload,queryName:this.state.queryName,query:this.state.query,isPersistedQueriesUIEnabled:e}))))}}]),n}(f.Component);t.AppComponent=O,O.propTypes={url:p.default.string};var T=O;t.default=T},286:function(e,t,n){"use strict";var r=n(0),a=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.GraphiQLComponent=void 0;var i=r(n(21)),u=r(n(58)),l=r(n(14)),o=r(n(15)),s=r(n(39)),c=r(n(25)),d=r(n(26)),f=r(n(22)),p=r(n(3)),h=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=P(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=i?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}r.default=e,n&&n.set(e,r);return r}(n(1)),y=r(n(23)),m=r(n(288)),v=r(n(422)),g=r(n(635)),E=r(n(637)),b=r(n(639)),_=n(35);function P(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(P=function(e){return e?n:t})(e)}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,f.default)(e);if(t){var a=(0,f.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,d.default)(this,n)}}var T=function(e){(0,c.default)(n,e);var t=O(n);function n(e){var r;return(0,l.default)(this,n),r=t.call(this,e),(0,p.default)((0,s.default)(r),"handleEditQuery",(function(e){r.setState({query:e})})),r.state={query:null},r}return(0,o.default)(n,[{key:"componentDidUpdate",value:function(e){this.props.query!==e.query&&this.setState({query:this.props.query})}},{key:"render",value:function(){var e=this;m.default.Logo=function(){return h.default.createElement("span",null)};var t=this.props.isPersistedQueriesUIEnabled;return h.default.createElement("div",{className:"gq-container"},h.default.createElement(m.default,{ref:function(t){return e._graphiql=t},onEditQuery:t?this.handleEditQuery:void 0,query:t?this.props.query:void 0,style:{height:"100vh"},defaultVariableEditorOpen:!0,fetcher:function(){var t=(0,u.default)(i.default.mark((function t(n){var r,a,u;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.url,(a=new XMLHttpRequest).open("POST",r,!1),a.setRequestHeader("Accept","application/json"),a.setRequestHeader("Content-Type","application/json"),a.onload=function(){u=JSON.parse(a.response)},a.send(JSON.stringify(n)),t.abrupt("return",u);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},h.default.createElement(m.default.Toolbar,null,h.default.createElement("div",{style:{background:"linear-gradient(#f7f7f7,#e2e2e2)"}},h.default.createElement(_.ActionButton,{isQuiet:!0,onPress:function(){return e._graphiql.handlePrettifyQuery()},staticColor:"black"},h.default.createElement(E.default,null),h.default.createElement(_.Text,null,"Prettify")),h.default.createElement(_.ActionButton,{isQuiet:!0,onPress:function(){return e._graphiql.handleToggleHistory()},staticColor:"black"},h.default.createElement(g.default,null),h.default.createElement(_.Text,null,"History")),t&&this.state.query&&h.default.createElement(v.default,{endpointURL:this.props.url,query:this.state.query,queryName:this.props.queryName,onSave:this.props.onSave}),t&&this.props.path&&h.default.createElement(b.default,{path:this.props.path,onPublish:this.props.onPublish})))))}}]),n}(h.Component);t.GraphiQLComponent=T,T.propTypes={url:y.default.string,path:y.default.string,query:y.default.string,queryName:y.default.string,onSave:y.default.func,onPublish:y.default.func}},41:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SHELL_PATH_PREFIX=t.PUBLISH_URL=t.PERSIST_URL=t.JCR_PATH_SEPARATOR=t.GET_PERSISTED_QUERIES_URL=t.EXECUTE_URL=t.DIALOG_PATH_SUFFIX=t.DIALOG_PATH_PREFIX=t.DEFAULT_TOAST_TIMEOUT=t.DEFAULT_QUERY=t.CONF_PATH_PREFIX=t.APPS_PATH_PREFIX=t.ACTION_DELETE=t.ACTION_COPY_URL=void 0;t.GET_PERSISTED_QUERIES_URL="/graphql/list.json";t.EXECUTE_URL="/graphql/execute.json";t.PERSIST_URL="/graphql/persist.json";t.JCR_PATH_SEPARATOR="/";t.DIALOG_PATH_PREFIX="/mnt/override/apps/";t.DIALOG_PATH_SUFFIX="/_cq_dialog.html";t.SHELL_PATH_PREFIX="mnt/overlay";t.APPS_PATH_PREFIX="apps";t.CONF_PATH_PREFIX="/conf";t.DEFAULT_TOAST_TIMEOUT=5e3;t.ACTION_COPY_URL="copy-url";t.ACTION_DELETE="delete";t.PUBLISH_URL="/bin/replicate.json";t.DEFAULT_QUERY='# Welcome to GraphiQL\n#\n# GraphiQL is an in-browser tool for writing, validating, and\n# testing GraphQL queries.\n#\n# Type queries into this side of the screen, and you will see intelligent\n# typeaheads aware of the current GraphQL type schema and live syntax and\n# validation errors highlighted within the text.\n#\n# GraphQL queries typically start with a "{" character. Lines that start\n# with a # are ignored.\n#\n# An example GraphQL query might look like:\n#\n#     {\n#       field(arg: "value") {\n#         subField\n#       }\n#     }\n#\n# Keyboard shortcuts:\n#\n#  Prettify Query:  Shift-Ctrl-P (or press the prettify button above)\n#\n#       Run Query:  Ctrl-Enter (or press the play button above)\n#\n#   Auto Complete:  Ctrl-Space (or just start typing)\n#\n\n'},422:function(e,t,n){"use strict";var r=n(0),a=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.SaveComponent=void 0;var i=r(n(14)),u=r(n(15)),l=r(n(39)),o=r(n(25)),s=r(n(26)),c=r(n(22)),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=i?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}r.default=e,n&&n.set(e,r);return r}(n(1)),f=r(n(23)),p=n(35),h=r(n(576)),y=n(78),m=n(41);function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.default)(e);if(t){var a=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var E=function(e){(0,o.default)(n,e);var t=g(n);function n(e){var r;(0,i.default)(this,n);var a=(r=t.call(this,e)).props.queryName?r.props.queryName:"",u=!r.props.queryName;return r.state={queryName:a,isNewQuery:u,inputQueryName:""},r.handleClick=r.handleClick.bind((0,l.default)(r)),r.handleFormSubmit=r.handleFormSubmit.bind((0,l.default)(r)),r.handleTextField=r.handleTextField.bind((0,l.default)(r)),r.createOrUpdatePersistedQuery=r.createOrUpdatePersistedQuery.bind((0,l.default)(r)),r}return(0,u.default)(n,[{key:"createOrUpdatePersistedQuery",value:function(){var e,t,n;this.state.isNewQuery?(e="PUT",t=this.state.inputQueryName,n="Successfully created a persisted query"):(e="POST",t=this.state.queryName,n="Successfully updated the persisted query");var r=this.props.endpointURL.split("/")[3],a=m.PERSIST_URL+"/"+r+"/"+t,i=JSON.stringify({query:JSON.parse(JSON.stringify(this.props.query))}),u=new XMLHttpRequest;u.open(e,a),u.setRequestHeader("Content-Type","application/json");var l=this.props.onSave;u.onload=function(){var e;200===u.status||201===u.status?((0,y.success)(n,{timeout:5e3}),l(t)):(0,y.error)((e=JSON.stringify(JSON.parse(u.responseText).errors[0].details)).includes("type=ValidationError; ")?e.split("type=ValidationError; message=")[1].split("@")[0]:e,{timeout:5e3})},u.send(i),this.setState({inputQueryName:""})}},{key:"handleTextField",value:function(e){this.setState({inputQueryName:e})}},{key:"handleFormSubmit",value:function(e){this.createOrUpdatePersistedQuery(),this.state.close(),e.preventDefault()}},{key:"handleClick",value:function(){this.createOrUpdatePersistedQuery(),this.state.isNewQuery&&this.state.close()}},{key:"componentDidUpdate",value:function(e){if(this.props.queryName!==e.queryName){var t=this.props.queryName?this.props.queryName:"",n=!this.props.queryName;this.setState({queryName:t,isNewQuery:n})}}},{key:"render",value:function(){var e=this;return this.state.isNewQuery?d.default.createElement(p.DialogTrigger,{type:"popover"},d.default.createElement(p.ActionButton,{isQuiet:!0,isDisabled:!this.props.query,staticColor:"black"},d.default.createElement(h.default,null),d.default.createElement(p.Text,null,"Save As")),(function(t){return e.state.close=t,d.default.createElement(p.Dialog,null,d.default.createElement(p.Content,null,d.default.createElement(p.Form,{onSubmit:e.handleFormSubmit},d.default.createElement(p.TextField,{label:"Query Name",placeholder:"Type your query name",value:e.state.inputQueryName,onChange:e.handleTextField}))),d.default.createElement(p.ButtonGroup,null,d.default.createElement(p.Button,{variant:"cta",onPress:e.handleClick},"save")))})):d.default.createElement(p.ActionButton,{isQuiet:!0,isDisabled:!this.props.query,onPress:this.handleClick,staticColor:"black"},d.default.createElement(h.default,null),d.default.createElement(p.Text,null,"Save"))}}]),n}(d.Component);t.SaveComponent=E,E.propTypes={endpointURL:f.default.string,query:f.default.object,queryName:f.default.string,onSave:f.default.func};var b=E;t.default=b},639:function(e,t,n){"use strict";var r=n(0),a=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.PublishComponent=void 0;var i=r(n(14)),u=r(n(15)),l=r(n(39)),o=r(n(25)),s=r(n(26)),c=r(n(22)),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var l=i?Object.getOwnPropertyDescriptor(e,u):null;l&&(l.get||l.set)?Object.defineProperty(r,u,l):r[u]=e[u]}r.default=e,n&&n.set(e,r);return r}(n(1)),f=r(n(23)),p=n(35),h=r(n(272)),y=r(n(273)),m=n(78),v=n(41);function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.default)(e);if(t){var a=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var b=function(e){(0,o.default)(n,e);var t=E(n);function n(e){var r;return(0,i.default)(this,n),(r=t.call(this,e)).state={},r.publishQuery=r.publishQuery.bind((0,l.default)(r)),r.unpublishQuery=r.unpublishQuery.bind((0,l.default)(r)),r}return(0,u.default)(n,[{key:"publishQuery",value:function(){this.requestReplication("activate")}},{key:"unpublishQuery",value:function(){this.requestReplication("deactivate")}},{key:"requestReplication",value:function(e){var t=new FormData;t.append("_charset_","utf-8"),t.append("path",this.props.path),t.append("cmd",e);var n=new XMLHttpRequest;n.open("POST",v.PUBLISH_URL);var r="activate"===e?"publish":"unpublish",a=this.props.onPublish;n.onload=function(){200===n.status||201===n.status?(a(),(0,m.success)("Selected query scheduled for "+r+"ing.",{timeout:5e3})):(0,m.error)("Could not "+r+" selected query",{timeout:5e3})},n.send(t),"deactivate"===e&&this.state.close()}},{key:"render",value:function(){var e=this;return d.default.createElement(d.default.Fragment,null,d.default.createElement(p.ActionButton,{isQuiet:!0,onPress:this.publishQuery,staticColor:"black"},d.default.createElement(h.default,null),d.default.createElement(p.Text,null,"Publish")),d.default.createElement(p.DialogTrigger,null,d.default.createElement(p.ActionButton,{isQuiet:!0,staticColor:"black"},d.default.createElement(y.default,null),d.default.createElement(p.Text,null,"Unpublish")),(function(t){return e.state.close=t,d.default.createElement(p.Dialog,null,d.default.createElement(p.Heading,null,"Unpublish persisted query"),d.default.createElement(p.Divider,null),d.default.createElement(p.Content,null,d.default.createElement(p.Text,null,"Unpublishing might break client applications that rely on the persisted query being present on publish. Do you really want to unpublish the selected persisted query?")),d.default.createElement(p.ButtonGroup,null,d.default.createElement(p.Button,{variant:"secondary",onPress:t},"No"),d.default.createElement(p.Button,{variant:"cta",onPress:e.unpublishQuery},"Yes")))})))}}]),n}(d.Component);t.PublishComponent=b,b.propTypes={path:f.default.string,onPublish:f.default.func};var _=b;t.default=_},642:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.PersistedQueriesPanel=void 0;var a=r(n(21)),i=r(n(58)),u=r(n(14)),l=r(n(15)),o=r(n(25)),s=r(n(26)),c=r(n(22)),d=r(n(1)),f=n(35),p=r(n(262)),h=r(n(643)),y=r(n(644)),m=r(n(23)),v=n(645),g=n(41);function E(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){l=!0,i=e},f:function(){try{u||null==n.return||n.return()}finally{if(l)throw i}}}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.default)(e);if(t){var a=(0,c.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}n(650);var P=function(e){(0,o.default)(b,e);var t,n,r,s,c,m=_(b);function b(e){var t;return(0,u.default)(this,b),(t=m.call(this,e)).state={configName:null,persistedQueries:null,onCreate:t.props.onCreate},t.element=d.default.createRef(),t}return(0,l.default)(b,[{key:"componentDidUpdate",value:(c=(0,i.default)(a.default.mark((function e(t){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.reloadFlag==t.reloadFlag&&t.url===this.props.url){e.next=3;break}return e.next=3,this.fetchPersistedQueries();case 3:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"componentDidMount",value:(s=(0,i.default)(a.default.mark((function e(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchPersistedQueries();case 2:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"fetchPersistedQueries",value:(r=(0,i.default)(a.default.mark((function e(){var t;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getConfigNameFromUrl(this.props.url),e.next=3,this.getPersistedQueries(t);case 3:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"getConfigNameFromUrl",value:function(e){return e?e.split("cq:graphql/")[1].split("/endpoint.json")[0]:""}},{key:"getPersistedQueries",value:(n=(0,i.default)(a.default.mark((function e(t){var n,r;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchPersistedQueriesData(t);case 2:(n=e.sent)?(r=this.getQueriesFromData(n),this.setState({persistedQueries:r,configName:t})):this.setState({persistedQueries:null,configName:t});case 4:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"fetchPersistedQueriesData",value:(t=(0,i.default)(a.default.mark((function e(t){var n,r,i;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(g.GET_PERSISTED_QUERIES_URL+g.JCR_PATH_SEPARATOR+t);case 2:if((n=e.sent).ok){e.next=10;break}if(404!==n.status){e.next=8;break}return e.abrupt("return",null);case 8:throw r='An error has occured while fetching persisted queries for configuration "'.concat(t,'" : ').concat(n.status),new Error(r);case 10:return e.next=12,n.json();case 12:return i=e.sent,e.abrupt("return",i);case 14:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})},{key:"getQueriesFromData",value:function(e){for(var t=[],n=0;n<e.length;n++){var r,a=E(e[n].queries);try{for(a.s();!(r=a.n()).done;){var i=r.value,u=i.path.shortForm,l={path:g.CONF_PATH_PREFIX+i.path.longForm,shortForm:u,queryName:u.substring(u.lastIndexOf("/")+1),query:i.data.query,lastReplicationAction:i.lastReplicationAction};t.push(l)}}catch(e){a.e(e)}finally{a.f()}}return t}},{key:"render",value:function(){var e=this.state,t=e.configName,n=e.persistedQueries,r=d.default.createElement(f.IllustratedMessage,{id:"loading"},d.default.createElement(f.ProgressCircle,{"aria-label":"Loadingâ€¦",size:"M",isIndeterminate:!0,marginTop:"20px"}));return n?r=n.length>0?d.default.createElement("div",{className:"persisted-queries-list"},d.default.createElement(v.PersistedQueriesList,{queryList:n,queryName:this.props.queryName,onQuerySelection:this.props.onQuerySelection,onDelete:this.props.onDelete})):d.default.createElement(f.IllustratedMessage,{id:"no-saved-queries"},d.default.createElement(y.default,null),d.default.createElement(f.Heading,null,"No saved queries"),d.default.createElement(f.Content,null,"Try saving a new query")):t&&(r=d.default.createElement(f.IllustratedMessage,{id:"not-enabled"},d.default.createElement(h.default,null),d.default.createElement(f.Heading,null,"Not enabled"),d.default.createElement(f.Content,null,"Try enabling Persisted Queries for this configuration"))),d.default.createElement("div",{className:"persisted-queries-panel",id:"persisted-queries-panel","data-config-name":t,ref:this.element},d.default.createElement("div",{className:"persisted-queries-header"},d.default.createElement("div",null,d.default.createElement(f.Heading,{level:"4"},"Persisted Queries")),d.default.createElement(f.ActionButton,{"aria-label":"Create Query",isQuiet:!0,onPress:this.state.onCreate},d.default.createElement(p.default,null))),r)}}]),b}(d.default.Component);t.PersistedQueriesPanel=P,P.propTypes={url:m.default.string,queryName:m.default.string,reloadFlag:m.default.bool,onQuerySelection:m.default.func,onDelete:m.default.func,onCreate:m.default.func}},645:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.PersistedQueriesList=void 0;var a=r(n(1)),i=r(n(23)),u=n(35);n(646);var l=r(n(272)),o=r(n(273)),s=n(647),c=function(e){var t=e.queryList,n=e.queryName,r=e.onQuerySelection,i=void 0===r?function(){}:r,c=e.onDelete,d=void 0===c?function(){}:c;return a.default.createElement(u.TableView,{"aria-label":"Table showing peristed queries",selectionMode:"single",selectionStyle:"highlight",width:"size-2400",height:"100vh",overflowMode:"truncate",selectedKeys:n?Array.of(n):[],onSelectionChange:function(e){i(t.filter((function(t){return t.queryName===e.currentKey}))[0])}},a.default.createElement(u.TableHeader,null,a.default.createElement(u.Column,{width:"16%",hideHeader:"true",align:"center"},"Publish Status"),a.default.createElement(u.Column,{width:"68%",hideHeader:"true"},"Query Name"),a.default.createElement(u.Column,{width:"16%",hideHeader:"true",align:"end"},"Menu")),a.default.createElement(u.TableBody,{items:t},(function(e){return a.default.createElement(u.Row,{key:e.queryName},a.default.createElement(u.Cell,null,"Activate"===e.lastReplicationAction&&a.default.createElement(l.default,{"aria-label":"Published",size:"S"}),"Deactivate"===e.lastReplicationAction&&a.default.createElement(o.default,{"aria-label":"Unpublished",size:"S"})),a.default.createElement(u.Cell,null,e.queryName),a.default.createElement(u.Cell,null,a.default.createElement(s.PersistedQueryMenu,{query:e,onDelete:d})))})))};t.PersistedQueriesList=c,c.propTypes={queryList:i.default.array,queryName:i.default.string,onQuerySelection:i.default.func,onDelete:i.default.func}},646:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n.n(r),i=n(167),u=n.n(i),l={insert:"head",singleton:!1};a()(u.a,l);t.default=u.a.locals||{}},647:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.PersistedQueryMenu=void 0;var a=r(n(7)),i=r(n(1)),u=r(n(23)),l=n(35),o=r(n(107)),s=n(648),c=n(649),d=n(41),f=function(e){var t=e.query,n=e.onDelete,r=void 0===n?function(){}:n,u=i.default.useState(),f=(0,a.default)(u,2),p=f[0],h=f[1],y=[{action:d.ACTION_COPY_URL,name:"Copy URL"},{action:d.ACTION_DELETE,name:"Delete"}];return i.default.createElement(i.default.Fragment,null,i.default.createElement(l.MenuTrigger,{align:"end"},i.default.createElement(l.ActionButton,{isQuiet:!0,"aria-label":"More Options"},i.default.createElement(o.default,null)),i.default.createElement(l.Menu,{items:y,onAction:function(e){!function(e,t){e===d.ACTION_COPY_URL?(0,s.copyUrlToClipboard)(t.shortForm,t.query):e===d.ACTION_DELETE&&h(e)}(e,t)}},(function(e){return i.default.createElement(l.Item,{key:e.action,textValue:e.name},e.name)}))),i.default.createElement(l.DialogContainer,{onDismiss:function(){return h(void 0)}},p===d.ACTION_DELETE&&i.default.createElement(c.DeleteQueryDialog,{queryName:t.queryName,queryShortForm:t.shortForm,onDelete:r})))};t.PersistedQueryMenu=f,f.PropTypes={query:u.default.object,onDelete:u.default.func}},648:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.copyUrlToClipboard=void 0;var a=r(n(21)),i=r(n(58)),u=n(78),l=n(41),o=function(){var e=(0,i.default)(a.default.mark((function e(t,n){var r,i;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s(n),i=c(t,r),!(navigator&&navigator.clipboard&&navigator.clipboard.writeText)){e.next=8;break}return e.next=5,navigator.clipboard.writeText(i);case 5:d("Query url copied to clipboard"),e.next=9;break;case 8:f("The Clipboard API is not available");case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();t.copyUrlToClipboard=o;var s=function(e){var t="";e&&((e=e.substring(0,e.indexOf("{")))&&(e=e.substring(e.indexOf("(")+1,e.indexOf(")")))&&e.split(",").forEach((function(e){e=e.substring(e.indexOf("$")+1,e.indexOf(":")),t+=";"+e+"="})));return t},c=function(e,t){var n=window.location.origin;return n||(n=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")),n+l.EXECUTE_URL+e+t},d=function(e){(0,u.success)(e,{timeout:l.DEFAULT_TOAST_TIMEOUT,variant:"positive"})},f=function(e){(0,u.error)(e,{timeout:l.DEFAULT_TOAST_TIMEOUT,variant:"negative"})}},649:function(e,t,n){"use strict";var r=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.DeleteQueryDialog=void 0;var a=r(n(1)),i=r(n(23)),u=n(78),l=n(35),o=n(41),s=function(e){var t=e.queryName,n=e.queryShortForm,r=e.onDelete,i=void 0===r?function(){}:r,u=(0,l.useDialogContainer)();return a.default.createElement(l.AlertDialog,{variant:"destructive",title:"Delete Query",primaryActionLabel:"Delete",secondaryActionLabel:"Cancel",onPrimaryAction:function(){var e=o.PERSIST_URL+n,r=new XMLHttpRequest;r.open("DELETE",e,!0),r.onload=function(){4==r.readyState&&"200"==r.status?(c("Deleted query: ".concat(t)),i()):d("Failed to delete: ".concat(t))},r.send(null),u.dismiss()},onSecondaryAction:function(){u.dismiss()}},a.default.createElement(l.View,null,a.default.createElement(l.Text,null,"Are you sure you want to delete the persisted query:"),a.default.createElement(l.Heading,{level:3},t)))};t.DeleteQueryDialog=s;var c=function(e){(0,u.success)(e,{timeout:o.DEFAULT_TOAST_TIMEOUT,variant:"positive"})},d=function(e){(0,u.error)(e,{timeout:o.DEFAULT_TOAST_TIMEOUT,variant:"negative"})};s.PropTypes={queryName:i.default.string,queryShortForm:i.default.string,onDelete:i.default.func}},650:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n.n(r),i=n(168),u=n.n(i),l={insert:"head",singleton:!1};a()(u.a,l);t.default=u.a.locals||{}},668:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.create=void 0;t.create=function(e,t){var n=t.getAttribute("data-params"),r={};try{r=JSON.parse(n)}catch(e){return console.error("ERROR parsing data-attr"),e}try{return new e(t,r)}catch(e){return console.error("ERROR:",t,r,e),e}}}},[[277,0,5]]]);